<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Autoevaluación Energías Alternativas</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        h1 { color: #2b6cb0; }
        .question { margin-bottom: 20px; }
        button { padding: 10px 15px; margin-top: 20px; }
        #result { font-size: 1.3em; font-weight: bold; margin-top: 20px; }
    </style>
</head>

<body>

<h1>Autoevaluación sobre Energías Alternativas</h1>

<label>Tu nombre:</label><br>
<input type="text" id="nombre" placeholder="Escribe tu nombre" required><br><br>

<form id="quiz">

    <div class="question">
        <p>1. ¿Qué central argentina es conocida por su energía nuclear?</p>
        <label><input type="radio" name="q1" value="correcto"> Atucha</label><br>
        <label><input type="radio" name="q1" value="incorrecto"> El Chocón</label><br>
        <label><input type="radio" name="q1" value="incorrecto"> Cauchari</label>
    </div>

    <div class="question">
        <p>2. ¿Qué energía proviene de residuos orgánicos?</p>
        <label><input type="radio" name="q2" value="correcto"> Biocombustible</label><br>
        <label><input type="radio" name="q2" value="incorrecto"> Eólica</label><br>
        <label><input type="radio" name="q2" value="incorrecto"> Nuclear</label>
    </div>

    <div class="question">
        <p>3. Ejemplo importante de energía hidroeléctrica en Argentina:</p>
        <label><input type="radio" name="q3" value="correcto"> Yacyretá</label><br>
        <label><input type="radio" name="q3" value="incorrecto"> Atucha II</label><br>
        <label><input type="radio" name="q3" value="incorrecto"> Cañadón León</label>
    </div>

    <div class="question">
        <p>4. ¿Qué provincia tiene un gran parque solar?</p>
        <label><input type="radio" name="q4" value="correcto"> Jujuy</label><br>
        <label><input type="radio" name="q4" value="incorrecto"> Santa Cruz</label><br>
        <label><input type="radio" name="q4" value="incorrecto"> Corrientes</label>
    </div>

    <div class="question">
        <p>5. ¿Qué región es líder en energía eólica?</p>
        <label><input type="radio" name="q5" value="correcto"> Patagonia</label><br>
        <label><input type="radio" name="q5" value="incorrecto"> Cuyo</label><br>
        <label><input type="radio" name="q5" value="incorrecto"> NEA</label>
    </div>

    <button type="button" onclick="calcular()">Enviar</button>
</form>

<p id="result"></p>

<script>
function calcular() {
    let score = 0;
    let respuestas = [];
    const nombre = document.getElementById("nombre").value;

    if (nombre.trim() === "") {
        alert("Por favor ingresá tu nombre.");
        return;
    }

    for (let i = 1; i <= 5; i++) {
        const seleccion = document.querySelector(`input[name="q${i}"]:checked`);
        if (!seleccion) continue;

        const correcta = (seleccion.value === "correcto");
        if (correcta) score++;

        respuestas.push({
            pregunta: `Pregunta ${i}`,
            respuesta: seleccion.parentNode.innerText,
            correcta: correcta
        });
    }

    document.getElementById("result").innerHTML = 
        "Tu puntaje es: " + score + " / 5";

    fetch("guardar_respuestas.php", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({
            nombre: nombre,
            puntaje: score,
            respuestas: respuestas
        })
    })
    .then(r => r.text())
    .then(alert);
}
</script>

</body>
</html>
